name: PR Summary
on: [pull_request]
jobs:
  pr-summary:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write
    steps:
      - uses: actions/checkout@v4
      - uses: actions/cache@v4
        with:
          path: ~/.ollama
          key: ${{ runner.os }}-ollama-${{ hashFiles('.github/workflows/pr-summary.yml') }}
          restore-keys: ${{ runner.os }}-ollama-
      - uses: ai-action/pull-request-summary@v1
        with:
          model: phi3:mini
          prompt: "Generate a concise bullet-point summary of the pull request changes, including: - Added files and their purpose - Modified files and key updates - Deleted files - Group by folders like frontend/ or backend/ if applicable. Focus only on code and file changes:"
